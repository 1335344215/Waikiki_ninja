var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,c=(e,t)=>{for(var o in t||(t={}))s.call(t,o)&&n(e,o,t[o]);if(a)for(var o of a(t))r.call(t,o)&&n(e,o,t[o]);return e},i=(e,a)=>t(e,o(a));"undefined"!=typeof require&&require;import{p as l,a as d,o as p,c as u,r as m,b as f,d as k,F as g,k as y,u as v,e as h,f as b,g as w,t as P,h as C,w as _,i as j,_ as A,j as x,l as L,m as I,n as O,q as N,s as S,v as D,x as U}from"./vendor.e712cdd6.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();l("data-v-4b23e37a"),d();const q={},Q={class:"NinjaLogo",src:"/assets/logo.03d6d6da.png",alt:"logo"};q.render=function(e,t){return p(),u("img",Q)};const E={components:{Logo:q}};l("data-v-1f23ce5f");const R={class:"header"},V={class:"header-wrapper"},J={class:"flex items-center"},K=f("p",{class:"pl-3 select-none"},"Ninja",-1);d(),E.render=function(e,t,o,a,s,r){const n=m("Logo");return p(),u("div",R,[f("div",V,[f("div",J,[k(n,{class:"h-10 w-10"}),K])])])},E.__scopeId="data-v-1f23ce5f";const z={class:"main"},T={setup:e=>(e,t)=>{const o=m("router-view");return p(),u(g,null,[k(E),f("div",z,[k(o)])],64)}};const $=y.create({prefixUrl:"/api",retry:{limit:0}});const W={setup(){const e=v();h();let t=b({nickName:void 0,timestamp:void 0});const o=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void a();const o=await function(e){const t=new URLSearchParams;return t.set("eid",e),$.get("userinfo",{searchParams:t}).json()}(e);if(!o)return A.error("获取用户信息失败，请重重新登录"),void a();t.nickName=o.data.nickName,t.timestamp=new Date(o.data.timestamp).toLocaleString()}catch(e){console.error(e)}};w(o);const a=()=>{localStorage.removeItem("eid"),e.push("/login")};return i(c({},P(t)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"}],getInfo:o,logout:a,delAccount:async()=>{try{const e=localStorage.getItem("eid"),t=await function(e){return $.post("delaccount",{json:e}).json()}({eid:e});200!==t.code?A.error(t.message):(A.success(t.message),setTimeout((()=>{a()}),1e3))}catch(e){console.error(e)}},openUrlWithJD:e=>{const t=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":"${e}"}`);window.location.href=`openapp.jdmobile://virtual?params=${t}`,console.log(window.location.href)}})}},Z={class:"content"},B={class:"card"},G=f("div",{class:"card-header"},[f("p",{class:"card-title"},"个人中心")],-1),H={class:"card-body"},F={class:"card-footer"},M=L("退出登录"),X=L("删除账号"),Y={class:"card"},ee=f("div",{class:"card-header"},[f("p",{class:"card-title"},"常见活动位置"),f("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),te={class:"card-body"},oe={class:"pr-2"},ae=["onClick"];W.render=function(e,t,o,a,s,r){const n=m("el-button");return p(),u("div",Z,[f("div",B,[G,f("div",H,[f("p",null,"昵称："+C(e.nickName),1),f("p",null,"更新时间："+C(e.timestamp),1)]),f("div",F,[k(n,{size:"small",auto:"",onClick:a.logout},{default:_((()=>[M])),_:1},8,["onClick"]),k(n,{type:"danger",size:"small",auto:"",onClick:a.delAccount},{default:_((()=>[X])),_:1},8,["onClick"])])]),f("div",Y,[ee,f("div",te,[f("ul",null,[(p(!0),u(g,null,j(a.activity,((e,t)=>(p(),u("li",{key:t,class:"leading-normal"},[f("span",null,C(e.name)+"：",1),f("span",oe,C(e.address),1),e.href?(p(),u("a",{key:0,class:"text-blue-400",href:"#",onClick:t=>a.openUrlWithJD(e.href)},"直达链接",8,ae)):x("",!0)])))),128))])])])])};const se={setup(){const e=v();h();let t=b({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1});const o=async()=>{try{const e=(await $.get("info").json()).data;t.marginCount=e.marginCount,t.allowAdd=e.allowAdd}catch(e){console.error(e)}},a=async()=>{try{const e=await $.get("qrcode").json();t.token=e.data.token,t.okl_token=e.data.okl_token,t.cookies=e.data.cookies,t.QRCode=e.data.QRCode,t.QRCode&&(t.waitLogin=!0,clearInterval(t.timer),t.timer=setInterval(s,3e3))}catch(e){console.error(e),A.error("生成二维码失败！请重试或放弃")}},s=async()=>{try{const o=await function(e){return $.post("check",{json:e}).json()}({token:t.token,okl_token:t.okl_token,cookies:t.cookies});switch(null==o?void 0:o.data.errcode){case 0:localStorage.setItem("eid",o.data.eid),A.success(o.message),clearInterval(t.timer),e.push("/");break;case 176:break;default:A.error(o.message),t.waitLogin=!1,clearInterval(t.timer)}}catch(o){clearInterval(t.timer),t.waitLogin=!1}};return w((()=>{o(),a()})),i(c({},P(t)),{getInfo:o,getQrcode:a,showQrcode:async()=>{t.qrCodeVisibility=!0},ckeckLogin:s,jumpLogin:async()=>{const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${t.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e},CKLogin:async()=>{try{const o=t.cookie.match(/pt_key=(.*?);/)&&t.cookie.match(/pt_key=(.*?);/)[1],a=t.cookie.match(/pt_pin=(.*?);/)&&t.cookie.match(/pt_pin=(.*?);/)[1];if(o&&a){const t=await function(e){return $.post("cklogin",{json:e}).json()}({pt_key:o,pt_pin:a});t.data.eid?(localStorage.setItem("eid",t.data.eid),A.success(t.message),e.push("/")):A.error(t.message||"cookie 解析失败，请检查后重试！")}else A.error("cookie 解析失败，请检查后重试！")}catch(o){console.error(o)}}})}},re={class:"content"},ne=I('<div class="card"><div class="card-header"><div class="flex items-center justify-between"><p class="card-title">Waikiki提醒您</p></div></div><div class="card-body text-left"><p>为了您的财产安全请关闭免密支付以及打开支付验密（京东-设置-支付设置-支付验密设置）。</p><p>建议京东账户绑定微信以保证提现能到账。</p><p>由于京东异地登录限制，扫码获取cookie只有2小时有效期，因此暂时关闭扫码功能，现需手动抓取Cookie。</p><b>且有效期不长，平均3-5天，因此需要及时更新。</b><p>PC用户建议使用开源工具<a href="https://github.com/littleCareless/JD_Get_Cookie" target="_blank">JD_GET_COOKIE</a>获取cookie并在下方填写。</p><p>手机用户可以使用Alook浏览器登录<a href="https://m.jd.com/" target="_blank">JD官网</a>，并在菜单-工具箱-开发者工具-Cookies中获取（Android和iPhone通用）。</p><p>另外也可以使用抓包工具（iPhone：Stream，Android：HttpCanary）抓取京东app的ck，要注意pt_key和pt_pin字段是以app_open开头的。</p><p>cookie直接填入输入框即可，Ninja会自动正则提取pt_key和pt_pin。</p></div><div class="card-footet"></div></div>',1),ce={class:"card hidden"},ie={class:"card-header"},le={class:"flex items-center justify-between"},de=f("p",{class:"card-title"},"扫码登录",-1),pe={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},ue=f("span",{class:"card-subtitle"}," 请点击下方按钮登录，点击按钮后回到本网站查看是否登录成功，京东的升级提示不用管。 ",-1),me={class:"card-body text-center"},fe={key:0,class:"flex flex-col w-48 m-auto mt-4"},ke=L("扫描二维码登录"),ge=L("跳转到京东 App 登录"),ye=["src"],ve=f("div",{class:"card-footer"},null,-1),he={class:"card"},be={class:"card-header"},we={class:"flex items-center justify-between"},Pe=f("p",{class:"card-title"},"CK 登录",-1),Ce={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},_e=f("span",{class:"card-subtitle"}," 请在下方输入您的 cookie 登录。 ",-1),je={class:"card-body text-center"},Ae=L("登录"),xe=f("div",{class:"card-footet"},null,-1);se.render=function(e,t,o,a,s,r){const n=m("el-button"),c=m("el-input");return p(),u("div",re,[ne,f("div",ce,[f("div",ie,[f("div",le,[de,f("span",pe,"余量："+C(e.marginCount),1)]),ue]),f("div",me,[e.qrCodeVisibility?(p(),u("img",{key:1,src:e.QRCode,width:256,class:"m-auto"},null,8,ye)):(p(),u("div",fe,[k(n,{type:"primary",round:"",onClick:a.showQrcode},{default:_((()=>[ke])),_:1},8,["onClick"]),k(n,{class:"mt-4 ml-0",type:"primary",round:"",onClick:a.jumpLogin},{default:_((()=>[ge])),_:1},8,["onClick"])]))]),ve]),f("div",he,[f("div",be,[f("div",we,[Pe,f("span",Ce,"余量："+C(e.marginCount),1)]),_e]),f("div",je,[k(c,{modelValue:e.cookie,"onUpdate:modelValue":t[0]||(t[0]=t=>e.cookie=t),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),k(n,{type:"primary",size:"small",round:"",onClick:a.CKLogin},{default:_((()=>[Ae])),_:1},8,["onClick"])]),xe])])};const Le=[{path:"/",component:W},{path:"/login",component:se}],Ie=O({history:N(),routes:Le}),Oe=[D,U,A],Ne=[A],Se=S(T);Oe.forEach((e=>{Se.component(e.name,e)})),Ne.forEach((e=>{Se.use(e)})),Se.use(Ie),Se.mount("#app");
