var e=Object.defineProperty,o=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(o,t,a)=>t in o?e(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a,c=(e,o)=>{for(var t in o||(o={}))s.call(o,t)&&r(e,t,o[t]);if(a)for(var t of a(o))n.call(o,t)&&r(e,t,o[t]);return e},i=(e,a)=>o(e,t(a));import{p as l,a as d,o as u,c as m,r as p,b as y,d as g,F as f,k,u as v,e as h,f as w,g as b,t as P,h as C,w as j,i as A,_,j as x,l as I,m as L,n as S,q as O,s as N,v as Q}from"./vendor.cc52a4ce.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?o.credentials="include":"anonymous"===e.crossorigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();l("data-v-4b23e37a"),d();const U={},D={class:"NinjaLogo",src:"/assets/logo.03d6d6da.png",alt:"logo"};U.render=function(e,o){return u(),m("img",D)};const B={components:{Logo:U}};l("data-v-1f23ce5f");const E={class:"header"},M={class:"header-wrapper"},R={class:"flex items-center"},T=y("p",{class:"pl-3 select-none"},"Ninja",-1);d(),B.render=function(e,o,t,a,s,n){const r=p("Logo");return u(),m("div",E,[y("div",M,[y("div",R,[g(r,{class:"h-10 w-10"}),T])])])},B.__scopeId="data-v-1f23ce5f";const V={class:"main"},q={setup:e=>(e,o)=>{const t=p("router-view");return u(),m(f,null,[g(B),y("div",V,[g(t)])],64)}};const J=k.create({prefixUrl:"/api",retry:{limit:0}});const z={setup(){const e=v();h();let o=w({nickName:void 0,timestamp:void 0});const t=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void a();const t=await function(e){const o=new URLSearchParams;return o.set("eid",e),J.get("userinfo",{searchParams:o}).json()}(e);if(!t)return _.error("获取用户信息失败，请重重新登录"),void a();o.nickName=t.data.nickName,o.timestamp=new Date(t.data.timestamp).toLocaleString()}catch(e){console.error(e)}};b(t);const a=()=>{localStorage.removeItem("eid"),e.push("/login")};return i(c({},P(o)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"}],getInfo:t,logout:a,delAccount:async()=>{try{const e=localStorage.getItem("eid"),o=await function(e){return J.post("delaccount",{json:e}).json()}({eid:e});200!==o.code?_.error(o.message):(_.success(o.message),setTimeout((()=>{a()}),1e3))}catch(e){console.error(e)}},openUrlWithJD:e=>{const o=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":"${e}"}`);window.location.href=`openapp.jdmobile://virtual?params=${o}`,console.log(window.location.href)}})}},K={class:"content"},W={class:"card"},$=y("div",{class:"card-header"},[y("p",{class:"card-title"},"个人中心")],-1),Z={class:"card-body"},F={class:"card-footer"},G=I("退出登录"),H=I("删除账号"),X={class:"card"},Y=y("div",{class:"card-header"},[y("p",{class:"card-title"},"常见活动位置"),y("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),ee={class:"card-body"},oe={class:"pr-2"},te=["onClick"];z.render=function(e,o,t,a,s,n){const r=p("el-button");return u(),m("div",K,[y("div",W,[$,y("div",Z,[y("p",null,"昵称："+C(e.nickName),1),y("p",null,"更新时间："+C(e.timestamp),1)]),y("div",F,[g(r,{size:"small",auto:"",onClick:a.logout},{default:j((()=>[G])),_:1},8,["onClick"]),g(r,{type:"danger",size:"small",auto:"",onClick:a.delAccount},{default:j((()=>[H])),_:1},8,["onClick"])])]),y("div",X,[Y,y("div",ee,[y("ul",null,[(u(!0),m(f,null,A(a.activity,((e,o)=>(u(),m("li",{key:o,class:"leading-normal"},[y("span",null,C(e.name)+"：",1),y("span",oe,C(e.address),1),e.href?(u(),m("a",{key:0,class:"text-blue-400",href:"#",onClick:o=>a.openUrlWithJD(e.href)},"直达链接",8,te)):x("",!0)])))),128))])])])])};const ae={setup(){const e=v();h();let o=w({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1});const t=async()=>{try{const e=(await J.get("info").json()).data;o.marginCount=e.marginCount,o.allowAdd=e.allowAdd}catch(e){console.error(e)}},a=async()=>{try{const e=await J.get("qrcode").json();o.token=e.data.token,o.okl_token=e.data.okl_token,o.cookies=e.data.cookies,o.QRCode=e.data.QRCode,o.QRCode&&(o.waitLogin=!0,clearInterval(o.timer),o.timer=setInterval(n,3e3))}catch(e){console.error(e),_.error("生成二维码失败！请重试或放弃")}},s=async e=>{document.getElementById("JweixinTip").style.display=e},n=async()=>{try{const t=await function(e){return J.post("check",{json:e}).json()}({token:o.token,okl_token:o.okl_token,cookies:o.cookies});switch(null==t?void 0:t.data.errcode){case 0:localStorage.setItem("eid",t.data.eid),_.success(t.message),clearInterval(o.timer),e.push("/");break;case 176:break;default:_.error(t.message),o.waitLogin=!1,clearInterval(o.timer)}}catch(t){clearInterval(o.timer),o.waitLogin=!1}};return b((()=>{t(),a()})),i(c({},P(o)),{getInfo:t,getQrcode:a,showQrcode:async()=>{o.qrCodeVisibility=!0},ckeckLogin:n,jumpLogin:async()=>{if(!!/MicroMessenger/i.test(navigator.userAgent))return void s("block");const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${o.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"${window.location.host}"}`;window.location.href=e},isMobile:async()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),setTipDisplayStyle:s,CKLogin:async()=>{try{const t=o.cookie.match(/pt_key=(.*?);/)&&o.cookie.match(/pt_key=(.*?);/)[1],a=o.cookie.match(/pt_pin=(.*?);/)&&o.cookie.match(/pt_pin=(.*?);/)[1];if(t&&a){const o=await function(e){return J.post("cklogin",{json:e}).json()}({pt_key:t,pt_pin:a});200===o.code&&o.data.eid?(localStorage.setItem("eid",o.data.eid),_.success(o.message),e.push("/")):_.error(o.message||"cookie 解析失败，请检查后重试！")}else _.error("cookie 解析失败，请检查后重试！")}catch(t){console.error(t)}}})}};l("data-v-096bec4d");const se={class:"content"},ne=[y("span",{class:"wxtip-icon"},null,-1),y("p",{class:"wxtip-txt"},[I("点击右上角"),y("br"),I("选择在浏览器中打开")],-1)],re={class:"card"},ce={class:"card-header"},ie={class:"flex items-center justify-between"},le=y("p",{class:"card-title"},"扫码登录",-1),de={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},ue=y("span",{class:"card-subtitle"}," 请点击下方按钮登录，点击按钮后回到本网站查看是否登录成功，京东的升级提示不用管。 ",-1),me={class:"card-body text-center"},pe={key:0,class:"flex flex-col w-48 m-auto mt-4"},ye=I("扫描二维码登录"),ge=I("跳转到京东 App 登录"),fe=["src"],ke=y("div",{class:"card-footer"},null,-1),ve={class:"card hidden"},he={class:"card-header"},we={class:"flex items-center justify-between"},be=y("p",{class:"card-title"},"CK 登录",-1),Pe={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Ce=y("span",{class:"card-subtitle"}," 请在下方输入您的 cookie 登录。 ",-1),je={class:"card-body text-center"},Ae=I("登录"),_e=y("div",{class:"card-footet"},null,-1);d(),ae.render=function(e,o,t,a,s,n){const r=p("el-button"),c=p("el-input");return u(),m("div",se,[y("div",{class:"wxtip",id:"JweixinTip",onClick:o[0]||(o[0]=e=>a.setTipDisplayStyle("none"))},ne),y("div",re,[y("div",ce,[y("div",ie,[le,y("span",de,"余量："+C(e.marginCount),1)]),ue]),y("div",me,[e.qrCodeVisibility?(u(),m("img",{key:1,src:e.QRCode,width:256,class:"m-auto"},null,8,fe)):(u(),m("div",pe,[g(r,{type:"primary",round:"",onClick:a.showQrcode},{default:j((()=>[ye])),_:1},8,["onClick"]),g(r,{class:"mt-4 ml-0",type:"primary",round:"",onClick:a.jumpLogin},{default:j((()=>[ge])),_:1},8,["onClick"])]))]),ke]),y("div",ve,[y("div",he,[y("div",we,[be,y("span",Pe,"余量："+C(e.marginCount),1)]),Ce]),y("div",je,[g(c,{modelValue:e.cookie,"onUpdate:modelValue":o[1]||(o[1]=o=>e.cookie=o),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),g(r,{type:"primary",size:"small",round:"",onClick:a.CKLogin},{default:j((()=>[Ae])),_:1},8,["onClick"])]),_e])])},ae.__scopeId="data-v-096bec4d";const xe=[{path:"/",component:z},{path:"/login",component:ae}],Ie=L({history:S(),routes:xe}),Le=[N,Q,_],Se=[_],Oe=O(q);Le.forEach((e=>{Oe.component(e.name,e)})),Se.forEach((e=>{Oe.use(e)})),Oe.use(Ie),Oe.mount("#app");
